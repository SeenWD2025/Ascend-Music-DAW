**DO NOT MANUALLY EDIT THIS FILE! Generated by devtools/update-root-mapfile.js**

# Project Map (auto-generated)
Generated: 2026-01-12T03:53:10.381Z

## Directory Index
- .github/agents (platform-eng) - Agent prompt roster for parallel development workflows.
- dev-guides_plans (product-eng) - Core business and developer source of truth documents plus sprint plans.
- devtools (platform-engineering) - Developer tooling scripts and automation helpers.
- docs (product-eng) - Public-facing and internal documentation for AMG Music Platform. Includes DAW realtime contract, WAM compatibility matrix, Drive upload strategy, and observability specs.
- packages/daw (A06 (Frontend/UI Specialist)) - React-based Digital Audio Workstation (DAW) frontend application with Tone.js audio engine, multi-track timeline, waveform rendering, mixer controls, clip drag/drop editing, WAM plugin system, and Google Drive integration for audio storage.
- supabase (A02 (Supabase/RLS Specialist)) - Supabase configuration, migrations, and RLS policies for AMG Music Platform. Contains auth/profile foundation, Google Drive integration, DAW foundation schema with collaborative project access control, and Sprint 2 plugin/export enhancements.
- tests (A07 (QA/Security Specialist)) - Automated tests for AMG Music Platform - unit, integration, and RLS policy tests. Includes DAW project RLS and API integration tests.

### .github/agents
- owner: platform-eng
- status: active
- summary: Agent prompt roster for parallel development workflows.
- last_updated: 2026-01-10
- key_artifacts:
  - README.md (usage guide for agent roster)
  - A00-ascend-orchestrator.agent.md (routing and scope enforcement)
  - A01-backend-fastify.agent.md through A08-devops-observability.agent.md (specialist agents)
  - A09-product-sprint-writer.agent.md (ticketization and AC/DoR/DoD)
- processes:
  - Use A09 to produce tickets; A00 to route; A01-A08 to execute in parallel
- dependencies:
  - ASCEND_DEV_SOURCE_OF_TRUTH.md and ASCEND_SPRINT_GUIDES.md for canonical scope
- risks:
  - Keep agent prompts in sync with decisions and sprint guides
- todo:
  - Add agent-run instructions if new tools are introduced
- tags:
  - agents
  - automation

### dev-guides_plans
- owner: product-eng
- status: active
- summary: Core business and developer source of truth documents plus sprint plans.
- last_updated: 2026-01-11
- key_artifacts:
  - ASCEND_DEV_SOURCE_OF_TRUTH.md (stack, architecture, V1 scope, locked decisions)
  - ASCEND_SPRINT_GUIDES.md (twelve-sprint breakdown for V1 vertical slices)
  - ASCEND_DAW_SPRINT_PLAN.md (DAW sprint plan + risk-mitigation workstreams)
  - ASCEND_UI_DESIGN_SYSTEM.md (UI/UX principles, tokens, and layout guides)
  - AscendMG-Pitch-Plan.md (pitch/plan deck content)
  - Ascend MG Shareable.md (external-friendly narrative)
  - ascend_business_outline.md (legacy outline)
  - ascend_developer_guide.md (legacy dev notes)
- processes:
  - Sprint-per-feature loop: plan -> build -> test -> QA -> deploy
- dependencies:
  - Supabase Auth-only; Drive private-by-default submissions; Fastify TypeScript backend
- risks:
  - Keep business and dev SSoT aligned with shipped architecture and data model changes
- todo:
  - Add links to migration directories once schema lands
- tags:
  - docs
  - planning
  - sprints

### devtools
- owner: platform-engineering
- status: active
- summary: Developer tooling scripts and automation helpers.
- last_updated: 2026-01-10
- key_artifacts:
  - update-root-mapfile.js (generates root-mapfile.md from directory mapfiles)
- processes:
  - Run node devtools/update-root-mapfile.js to refresh the root mapfile
- dependencies:
  - Node 18+
- risks:
  - Keep script paths aligned with mapfile locations; exclude generated files from inputs
- todo:
  - Add lint/test tooling scripts as they are introduced
- tags:
  - tooling
  - automation

### docs
- owner: product-eng
- status: active
- summary: Public-facing and internal documentation for AMG Music Platform. Includes DAW realtime contract, WAM compatibility matrix, Drive upload strategy, and observability specs.
- last_updated: 2026-01-15
- key_artifacts:
  - OAUTH_SETUP.md: Step-by-step Google OAuth configuration guide for Supabase Auth
  - DAW_REALTIME_CONTRACT_V1.md: Collaboration event envelope, ordering, idempotency rules
  - WAM_COMPATIBILITY_MATRIX.md: Browser support and plugin compatibility for Web Audio Modules
  - DRIVE_UPLOAD_STRATEGY.md: Resumable upload, retry/backoff, token refresh patterns
  - DAW_POSTHOG_TAXONOMY.md: PostHog event taxonomy for DAW features
  - DAW_SENTRY_INSTRUMENTATION.md: Sentry error capture and performance spans
  - DAW_ALERTS_DASHBOARDS.md: Monitoring alerts and SLO definitions
- processes:
  - Sync with dev-guides_plans when new docs are published
- dependencies:
  - ASCEND_DEV_SOURCE_OF_TRUTH.md for authoritative technical context
  - supabase/config.toml for OAuth provider settings
- risks:
  - Doc drift from source-of-truth files
- todo:
  - Add architecture diagrams and onboarding docs
  - Add Stripe integration setup guide
  - Add Google Drive integration setup guide
- tags:
  - docs
  - auth
  - oauth

### packages/daw
- owner: A06 (Frontend/UI Specialist)
- status: active
- summary: React-based Digital Audio Workstation (DAW) frontend application with Tone.js audio engine, multi-track timeline, waveform rendering, mixer controls, clip drag/drop editing, WAM plugin system, and Google Drive integration for audio storage.
- last_updated: 2026-01-11
- key_artifacts:
  - src/lib/audio/engine.ts: Tone.js wrapper with transport control and position tracking
  - src/lib/audio/latency.ts: Audio latency measurement and glitch detection
  - src/lib/audio/waveform.ts: Waveform decoding, extraction, and canvas rendering
  - src/lib/drive/upload.ts: Resumable upload utilities for Google Drive
  - src/lib/drive/cache.ts: LRU audio buffer cache for scrub/playback optimization
  - src/lib/drive/fetcher.ts: Audio fetcher with caching and retry logic
  - src/lib/wam/loader.ts: WAM plugin loader with timeout and retry logic
  - src/stores/transport.store.ts: Zustand store for transport state (play/pause/stop/seek/bpm)
  - src/stores/project.store.ts: Zustand store for project, tracks, clips, and selection state
  - src/stores/plugin.store.ts: Zustand store for WAM plugin lifecycle and state
  - src/components/daw/TransportBar.tsx: Transport controls UI
  - src/components/daw/Timeline.tsx: Enhanced timeline with multi-track editing, zoom, snap-to-grid
  - src/components/daw/Track.tsx: Track lane with header and clips
  - src/components/daw/TrackHeader.tsx: Track header with name, color, mute/solo/arm, volume/pan
  - src/components/daw/Clip.tsx: Clip component with waveform, selection, drag handles
  - src/components/daw/WaveformDisplay.tsx: Canvas-based waveform visualization
  - src/components/daw/Mixer.tsx: Horizontal mixer panel with channel strips
  - src/components/daw/DAWShell.tsx: Main DAW layout component
  - src/components/daw/UploadDropzone.tsx: Drag-and-drop upload overlay for audio files
  - src/components/daw/FileImportDialog.tsx: Dialog for browsing and importing Drive files
  - src/components/daw/PluginBrowser.tsx: Plugin catalog browser with search and category filters
  - src/components/daw/PluginSlot.tsx: Single plugin slot with bypass, delete, drag handle
  - src/components/daw/PluginParameters.tsx: Generic parameter controls with throttled updates
  - src/components/daw/EffectsChain.tsx: Drag-and-drop effects chain for track plugins
  - src/components/daw/PluginLoadError.tsx: Graceful error UI with retry/remove actions
  - src/lib/realtime/plugin-sync.ts: Plugin parameter sync with throttling and locking
  - src/hooks/useAudioContext.ts: Audio context resume handling hook
  - src/hooks/useClipDrag.ts: Clip drag hook with snap-to-grid quantization
  - src/hooks/useAudioBuffer.ts: Hook for loading audio buffers with caching
- processes:
  - Run `npm install` then `npm run dev` to start development
  - Audio context requires user gesture to resume (handled by AudioContextOverlay)
  - Desktop-only: MobileBlocker shown on small screens
  - Keyboard shortcuts: Delete to remove clips, Escape to deselect, Ctrl+A to select all
  - Drag audio files onto DAW to upload and create clips
  - WAM plugins load from webaudiomodules.com CDN with 10s timeout and 2 retries
- dependencies:
  - packages/api: Backend API for project CRUD, Drive proxy, and realtime collaboration
  - packages/shared: Shared types
  - docs/DAW_REALTIME_CONTRACT_V1.md: Event envelope for collaboration
  - docs/DRIVE_UPLOAD_STRATEGY.md: Resumable upload patterns
  - docs/WAM_COMPATIBILITY_MATRIX.md: Known-good WAM plugins
- risks:
  - Browser audio latency varies; baseline metrics needed per browser
  - Safari AudioWorklet limitations for WAM plugins
  - Mobile browsers not supported for v1
  - Large audio files may hit browser memory limits
  - WAM plugin CDN availability affects plugin loading
- todo:
  - [x] Wire up API client for project persistence
  - [x] Implement WebSocket client for realtime collaboration
  - [x] Integrate WAM plugin loader
  - [x] Create plugin browser and effects chain UI
  - [ ] Add audio playback for clips (Sprint 2)
  - [ ] Add undo/redo for clip operations
  - [x] Implement audio waveform prefetching for visible timeline clips
  - [ ] Connect effects chain to audio routing
- tags:
  - daw
  - frontend
  - react
  - tone.js
  - audio
  - drive
  - plugins
  - wam
  - sprint-2

### supabase
- owner: A02 (Supabase/RLS Specialist)
- status: active
- summary: Supabase configuration, migrations, and RLS policies for AMG Music Platform. Contains auth/profile foundation, Google Drive integration, DAW foundation schema with collaborative project access control, and Sprint 2 plugin/export enhancements.
- last_updated: 2026-01-25
- key_artifacts:
  - config.toml: Supabase CLI configuration with auth, storage, and API settings
  - migrations/20260110000001_auth_profiles_roles.sql: Core profile tables (profiles, service_provider_profiles, service_seeker_profiles) with RLS policies
  - migrations/20260110000002_seed_admin.sql: Admin user seeding and promote_to_admin helper function
  - migrations/20260111000001_drive_connections_files.sql: Google Drive OAuth connections and file metadata with private-by-default RLS
  - migrations/20260115000001_daw_foundation.sql: DAW project schema (daw_projects, daw_tracks, daw_clips, daw_plugins, daw_collaborators, daw_exports) with owner/collaborator RLS
  - migrations/20260118000001_daw_cascade_updated_at.sql: Cascade triggers for updated_at propagation (track->project, clip->project, plugin->project)
  - migrations/20260125000001_daw_plugins_export.sql: Sprint 2 - Plugin versioning (wam_version), export idempotency, R2 tracking, and plugin->track cascade
- processes:
  - Use Supabase CLI migrations; never apply ad-hoc SQL in prod
  - Run `supabase db push` for local development
  - Run `supabase db reset` to reset local database and apply all migrations
  - Test RLS policies with both owner and non-owner contexts
  - Use drive_connection_status view for client-side connection checks (never expose tokens)
- dependencies:
  - dev-guides_plans/ASCEND_DEV_SOURCE_OF_TRUTH.md: Data model patterns and auth requirements
  - Supabase Auth: auth.users table for user identity
- risks:
  - Schema drift if migrations are bypassed
  - RLS policy gaps could expose sensitive data (service_seeker_profiles, drive_connections tokens)
  - Admin promotion function requires careful access control
  - Drive tokens must only be accessed via service role
- todo:
  - Add migrations for workspaces and tasks (Sprint 03)
  - Add migrations for Stripe Connect tables (Sprint 04)
  - Add migrations for chat and contacts (Sprint 05)
  - Add migrations for playlists and radio (Sprint 06)
  - Add RLS integration tests
  - Add FK constraint from drive_files.project_id to projects table when created
- tags:
  - database
  - auth
  - rls
  - supabase
  - sprint-01
  - sprint-02
  - drive

### tests
- owner: A07 (QA/Security Specialist)
- status: active
- summary: Automated tests for AMG Music Platform - unit, integration, and RLS policy tests. Includes DAW project RLS and API integration tests.
- last_updated: 2026-01-15
- key_artifacts:
  - setup.ts (test environment setup with Supabase clients)
  - vitest.config.ts (Vitest test runner configuration)
  - SECURITY_CHECKLIST.md (security verification document)
  - helpers/ (test utilities: auth, factories, API helpers, drive helpers)
  - rls/ (RLS policy tests for all tables)
  - integration/ (API endpoint integration tests)
  - unit/ (unit tests for services and middleware)
- processes:
  - Run `npm test` from tests/ directory to execute all tests
  - Run `npm run test:rls` for RLS policy tests only
  - Run `npm run test:integration` for API integration tests only
  - Run `npm run test:unit` for unit tests only
  - Run `npm run test:coverage` for coverage report
- dependencies:
  - ASCEND_SPRINT_GUIDES.md acceptance criteria per feature
  - Supabase local instance or test database
  - API server running for integration tests
- risks:
  - Integration tests require running API and Supabase instances
  - RLS tests require proper test user cleanup
  - Test database should be separate from development
- todo:
  - Add E2E tests for critical UI flows
  - Implement rate limiting tests (once rate limiting is added)
  - Add performance/load tests for key endpoints
  - Frontend component tests
- tags:
  - testing
  - qa
  - security
  - sprint-01
  - sprint-02
